<div class="product-detail">
    <div class="container">
        <!-- Navigation -->
        <nav class="breadcrumb-nav">
            <a routerLink="/" class="breadcrumb-link">üè† Accueil</a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">D√©tails Produit</span>
        </nav>

        <!-- Produit introuvable -->
        @if (!product) {
            <div class="not-found">
                <div class="not-found-icon">‚ùå</div>
                <h2>Produit non trouv√©</h2>
                <p>Le produit que vous recherchez n'existe pas ou a √©t√© supprim√©.</p>
                <a routerLink="/" class="btn-back-home">Retour √† l'accueil</a>
            </div>
        }

        <!-- Produit trouv√© -->
        @if (product) {
            <div class="product-container">
                @if (!isEditing) {
                    <div class="product-view">
                        <!-- Image du produit -->
                        <div class="product-image-section">
                            <div class="product-image">
                                <img
                                    [src]="'assets/podium.jpg'"
                                    [alt]="product.name"
                                />
                            </div>
                            <div class="product-gallery">
                                <div class="gallery-thumb active">
                                    <img src="assets/podium.jpg" alt="Vue 1" />
                                </div>
                                <div class="gallery-thumb">
                                    <img src="assets/podium.jpg" alt="Vue 2" />
                                </div>
                                <div class="gallery-thumb">
                                    <img src="assets/podium.jpg" alt="Vue 3" />
                                </div>
                            </div>
                        </div>

                        <!-- Infos produit -->
                        <div class="product-info-section">
                            <div class="product-header">
                                <h1 class="product-title">{{ product.name }}</h1>
                            </div>

                            <div class="product-price">
                                <span class="price-amount">{{ product.price | number:'1.2-2' }} fcfa</span>
                                <span class="price-label">Prix TTC</span>
                            </div>

                            <div class="product-description">
                                <h3>Description</h3>
                                <p>{{ product.description }}</p>
                            </div>

                            <div class="product-stock">
                                <h3>Disponibilit√©</h3>
                                <div class="stock-status" [ngClass]="{
                                    'stock-red': product.quantity === 0,
                                    'stock-orange': product.quantity > 0 && product.quantity < 10,
                                    'stock-green': product.quantity >= 10
                                }">
                                    <span class="stock-icon">
                                        @if (product.quantity === 0) { ‚ùå }
                                        @if (product.quantity > 0 && product.quantity < 10) { ‚ö†Ô∏è }
                                        @if (product.quantity >= 10) { ‚úÖ }
                                    </span>
                                    <span class="stock-text">
                                        @if (product.quantity === 0) { √âpuis√© }
                                        @if (product.quantity > 0 && product.quantity < 10) { Stock limit√©: {{ product.quantity }} disponibles }
                                        @if (product.quantity >= 10) { En stock: {{ product.quantity }} disponibles }
                                    </span>
                                </div>
                            </div>

                            <div class="product-actions">
                                <div class="quantity-selector">
                                    <label>Quantit√©:</label>
                                    <div class="quantity-controls">
                                        <button class="qty-btn" [disabled]="quantity <= 1">-</button>
                                        <input type="number" [(ngModel)]="quantity" min="1" max="{{ product.quantity }}" class="qty-input">
                                        <button class="qty-btn" [disabled]="quantity >= product.quantity">+</button>
                                    </div>
                                </div>

                                <div class="action-buttons">
                                    <button class="btn-add-cart" [disabled]="product.quantity === 0">
                                        üõí Ajouter au panier
                                    </button>
                                </div>
                            </div>

                            @if (canEdit) {
                                <div class="admin-actions">
                                    <button class="btn-edit" (click)="enableEdit()">
                                        ‚úèÔ∏è Modifier le produit
                                    </button>
                                </div>
                            }
                        </div>
                    </div>
                }

                <!-- Mode √©dition -->
                @if (isEditing) {
                    <div class="edit-mode">
                        <div class="edit-header">
                            <h2>Modifier le produit</h2>
                            <p>Modifiez les informations du produit ci-dessous</p>
                        </div>

                        <form class="edit-form">
                            <div class="form-group">
                                <label>Nom du produit</label>
                                <input type="text" [(ngModel)]="editForm!.name" name="name" placeholder="Nom du produit">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Prix (fcfa)</label>
                                    <input type="number" [(ngModel)]="editForm!.price" name="price" placeholder="0.00">
                                </div>
                                <div class="form-group">
                                    <label>Quantit√© en stock</label>
                                    <input type="number" [(ngModel)]="editForm!.quantity" name="quantity" placeholder="0">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Description</label>
                                <textarea [(ngModel)]="editForm!.description" name="description" placeholder="Description du produit" rows="4"></textarea>
                            </div>

                            <div class="form-group">
                                <label>Image URL</label>
                                <input type="url" placeholder="https://..." name="imageUrl">
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn-cancel" (click)="cancel()">Annuler</button>
                                <button type="button" class="btn-save" (click)="save()">üíæ Sauvegarder</button>
                            </div>
                        </form>
                    </div>
                }
            </div>
        }
    </div>
</div>
